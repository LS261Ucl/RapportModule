@inherits ReportBase
@page "/report/preparation/{id:int}"

<EditForm Model="@reportDto" OnValidSubmit="@OnInitializedAsync">
    <DataAnnotationsValidator/>
    <MudCard>
        <MudCardContent>
            <MudInputLabel Class="justify-content-center">@reportDto.Title</MudInputLabel>
            <MudGrid>
      
                            @if(reportDto.ReportGroups != null)
            {
                @foreach(var groups in reportDto.ReportGroups)
                {
                    <br /><br />
                      <MudTextField Label="Titel" @bind-Value="groups.Titel" For="@(() => groups.Titel )"></MudTextField>
                      <br /> <br />
                      @if(groups.Elements != null)
                        {
                            @foreach(var element in groups.Elements)
                            {<br />
                                <Row>
                                <MudTextField Label="Titel" @bind-Value="element.Titel" For="(() => element.Titel)"></MudTextField>
                                <MudTextField Label="Bemærkninger" @bind-Value="element.Remarks" For="(() => element.Remarks)"></MudTextField>
                                <MudNumericField Label="Antal" @bind-Value="element.Numbers" For="(() => element.Numbers)"></MudNumericField>
                                </Row>
                                
                            }
                        }
                    }
            }
            </MudGrid>   
            <MudButton 
                @onclick="(() => SendMail())"
                Variant="Variant.Filled" 
                EndIcon="@Icons.Material.Filled.Send" 
                Color="Color.Primary">Send</MudButton>
        </MudCardContent>
    </MudCard>
    <ValidationSummary/>
</EditForm>
